{% extends "logo-box.html" %}

{% block content %}
<form
  id="evaluationForm"
  action="{{ url_for('main.process_evaluation') }}"
  method="POST"
  enctype="multipart/form-data"
>
  <div class="mb-6 flex flex-col gap-6">
    <div>
      <label
        class="block text-gray-700 text-sm font-bold mb-2 text-center"
        for="reference_file"
      >
        Choose Reference File (.txt)
      </label>
      <input
        type="file"
        name="reference_file"
        id="reference_file"
        accept=".txt"
        class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
        required
      />
    </div>

    <div>
      <label
        class="block text-gray-700 text-sm font-bold mb-2 text-center"
        for="test_file"
      >
        Choose Test File (.txt)
      </label>
      <input
        type="file"
        name="test_file"
        id="test_file"
        accept=".txt"
        class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
        required
      />
    </div>

    <div class="flex gap-2">
      <select
        name="model"
        required
        id="model"
        class="px-3 py-2 w-full border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
      >
        <option value="">Select a model</option>
        <option value="mistral-large-latest">
          mistral-large-latest (Recommended)
        </option>
        <option value="gemini-1.5-flash">gemini-1.5-flash</option>
      </select>
      <input
        type="password"
        name="api_key"
        required
        id="api_key"
        placeholder="API Key"
        class="px-3 py-2 w-full border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
      />
    </div>
  </div>

  <button
    type="submit"
    id="submitBtn"
    class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
  >
    <span id="buttonText">Start Evaluation</span>
    <span id="buttonSpinner" class="flex gap-2 items-center hidden">
      <svg
        class="animate-spin -ml-1 mr-2 h-5 w-5 text-white"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
      >
        <circle
          class="opacity-25"
          cx="12"
          cy="12"
          r="10"
          stroke="currentColor"
          stroke-width="4"
        ></circle>
        <path
          class="opacity-75"
          fill="currentColor"
          d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
        ></path>
      </svg>
      Processing...
    </span>
  </button>
</form>

<script src="{{ url_for('static', filename='js/index.js') }}"></script>
{% endblock %}
